MEANapp
=======

<b>A large web application boilerplate code using MEAN stack</b> built by extending <a href="http://yeoman.io/">Yeoman</a> <a href="https://github.com/DaftMonk/generator-angular-fullstack">angular-fullstack</a>


<h3>Added Features:</h3>
<ol>
<li>User has a unique nickname which is used instead of actual name in all activity.</li>
<li>Added a user profile setting page (using form generated by Mongoose Schema) which is linked to the user ID.</li>
Note that forms-angular is used as third paty forms generator and ui-routes used to nest form angular generated view.</li>
<li>Delete user removes profile but retains user with state marked as deleted.</li>
<li>Confirmation workflow for sign up and password reset for local Auth strategy.</li>
<li>Proper handling of relogin cases of deleted user.</li>
</ol>

<h3>Future work:</h3>
<ol>
<li> Modal authentication workflow and Git OAuth2 support.</li>
<li>Create welcome, getting started etc. pages and Ui router based full front end.</li>
<li>Create a site schema and assets skins to provide multi branding and language support.</li>
<li>Add FB, Twitter, G+ like/share buttons in nav with back end boiler plate.</li>
<li>Password rules, with mandatory change period settings.Remember Me option. Client side password confirm field. Recaptcha</li>
<li>Add all unit test cases (This should have been done first, but am keeping it for later for now.)</li>
</ol>

<h3>Thirdparty Credits</h3>
<ol>
<li>http://tylerhenkel.com/building-an-angular-node-comment-app-using-yeoman/ for the basic scaffolding</li>
<li>https://github.com/forms-angular (see: http://www.forms-angular.org) for Forms model to view automation</li>
<li>Inspired by https://github.com/fraserxu/node-registration for user activation workflow</li>
</ol>

<h3>Usage Steps</h3>
<h3>Installation prerequisites for the beginers</h3>
<ol>
<li>TBD</li>
</ol>
______________________________________________________________________________________

<h2>Author Development Journal</h2>

**Background:** I am a senior software development manager with additional project and program management responsibilities. Exposure to emerging technologies as part of my day job has been minimal for the past 8 years, but I try to keep myself current by learning and coding in new technologies during my free time.

I am totally new to M.E.A.N stack: Mongo DB (Mongoose Schema), Express.js Web Server, Angular.js MVC, Node.js backend. This project served me as a learning tool and thus can be useful to any one who is just starting out on MEAN stack. I have kept this journal so that people can refer to it and the commit history to gain the same learning without additional documentation.

<b>Dev Note:</b>
The dependency annotation being used every by Yeoman is <i>Implicit Annotation</i>, which may break during minification as per:
https://docs.angularjs.org/guide/di#inline-array-annotation
______________________________________________________________________________________

<b>First Commit:</b> https://github.com/anshumandas/meanapp/commit/ab3b9b6c4b3aac196c2e3c265ef3cbc432741cbc

This app was generated by using yeoman generator (angular fullstack and forms angular)

> yo fng

See http://www.forms-angular.org/#/get-started for more details
uiRouter was chosen instead of ngRouter. Grunt for build. Yes for all all other options.

To star server:

> grunt serve

The initial generated files have some bug as the Applicants Nav link does not work.

<b>Second Commit</b> was only of this file which was missed on first commit
https://github.com/anshumandas/meanapp/commit/1bf0c9fca2499f62ac335ddd52249545fb4399a1
______________________________________________________________________________________

<b>Third Commit:</b> https://github.com/anshumandas/meanapp/commit/f8abce18345d112e7fbcb63814f07bc7bd44670f

 - Corrected the bug in Applicant nav link by commenting the dropdown
   logic.  {Update: we should use  &lt;li dropdown class="dropdown" &gt;
   &lt; a href="#" class="dropdown-toggle" dropdown-toggle &gt;  The
   dropdown and dropdown toggle must be outside of the class also}
 - Seems BasicReports do not work now. Leaving it as is.
 - Added a nickname property in user model. This is the unique name that will be shown when user comments. It allows us to separate real name from the virtual identity. Nickname gets generated automatically.
 - Ability to change this will be added in later commits.
 - Made role property an enum
 - Reverted signup form to the angular (from forms angular) one with additional help message.
 - fixed few deprecation warnings
______________________________________________________________________________________

<b>Fourth Commit:</b> https://github.com/anshumandas/meanapp/commit/8cab9e6ce197f663f163a6eb44c50604a472c447

 - The signup now has only nick name. User name shifted to Profile
 - Added a user profile setting form using forms angular.
 - to create the profile display logic boiler-plate used
 `yo angular-fullstack:route profile` 
 - Made changes to the controller so that we can get the profile ID queried using the User id
 - Changed profile html to nest the forms-angular generated form:
This is a good example for UI-Router use case where we are nesting a third party view.
See account.js for nested profile states. The navbar has ui-sref logic. profile.controller has logic to block and control third party event.
<b>Note:</b> There is a bug in forms-angular due to which when you move from edit screen to any other screen a modal appears for save confirmation, even when the content has been already saved. This is not handled here yet.
 - Modified nav bar. Commented the Applicants part of forms angular.
User delete now deletes profile and puts user state as deleted instead of deleting the record. {Intent: All users activity like comments should not be deleted with user delete. Only profile info is deleted}
 - Added signup confirmation and password reset email client side routes
______________________________________________________________________________________

<b>Fifth Commit:</b> https://github.com/anshumandas/meanapp/commit/7398f94d6f3a5858f60b2afde5e6ff821820c176

 - Commented the $stateChangeStart in profile controller and am using the forms-angulars advised method of client side customization (http://www.forms-angular.org/#/forms#client-side-customisation) by adding the onAfterCreate methods etc. (It was a good learning anyways on ui route events...)
 - Added email (library http://www.nodemailer.com/) confirmation support by using some code from https://github.com/fraserxu/node-registration and following http://www.scotchmedia.com/tutorials/express/authentication/3/02
**Note:** We can use DirectTransport instead of SMTP transport for dev but I found https://mailtrap.io/ to be quite handy during testing. *(had tried https://github.com/deitch/activator but its required user model conflicts with the mongoose user model)*
 - Added a view template for any schema using form-angular client side customization. (Not perfect. Plan to change this in future).

**Sixth Commit** is an update only to this file
